To launch the project you can execute:
```bash
./launch.sh
```
and to clean it you can execute:
```bash
./clean.sh
```

**The Following Steps are how i made the test:**

# Launch Mysql

launch mysql:
```bash
mysql -u root -h 127.0.0.1 --protocol=tcp -p
```

### Quick setup
create a user into the mysql server
```sql
CREATE USER 'candidat2020'@'127.0.0.1' IDENTIFIED BY 'dfskj_878$*=';
```

Grant permissions 
```sql
GRANT ALL PRIVILEGES ON quanticfy_test.* TO 'candidat2020'@'127.0.0.1';
```
And flush privileges
```sql
FLUSH PRIVILEGES;
```

# Load env variables

Load the env variables stored in .env file, becareful the IP variable has been change because the IP addr of the subject dont exist


# Create The database

First you have to MySQL server running on your machine by using the env variable in the .env file.

## Create the schema

With the schema generated by the [ORM](https://www.quickdatabasediagrams.com/), we can create the database.
This is the SQL schema [here](./quanticfy_test.sql).

## Create the tables

Generate Querries to create all the tables by using the schema generated by the ORM.
```go
database, err = sql.Open("mysql", login+":"+password+"@tcp("+ip+")/"+db_name)
```

## Fill the tables with Informations

### Use of a website

I used [this website](https://www.mockaroo.com/schemas/new) to generate fake data.

### Use of a script

I used a script to generate fake data, you can find it here ([email](./generate_email.go), [cookie](./generate_cookie.go), [mobileID](./generate_mobileid.go), [PhoneNumber](./generate_phonenumber.go), [Postal](./generate_postal.go)).

# Treats

## Sum all purchases

summ all purchases by using the query below inside a loop:
```go
		query := fmt.Sprintf("SELECT CustomerID, Quantity FROM CustomerEventData WHERE ContentID = %d AND EventTypeID = 6 AND InsertDate >= '2020-04-01 00:00:00 +0000 UTC'", contentID)
```
Then stored in a structure:
```go
type TotalPrice struct {
    CustomerID int
    TotalPrice float64
}
```

## Sort all the total purchases

Just simple sort by using [sortTotalPurchase()](./treat.go) function.

## Map of best customers

I used a map to store the best customers, the key is the customerID and the value is the total price of the customer. We the upper quantile to create this map.

## Create Slice and Map for quantiles Informations

I used a slice to store all the quantiles and a map to store the quantiles informations.
```go
var Quantiles []float64
var InfoQuantiles map[float64]top_customer
```

# Export

[Export](./export_table.go) the result in a NewTables.

This is the part of the code i did not understand very well and i did not have time to finish it.